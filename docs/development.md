# 开发文档

## 技术栈

- 基础框架：eruda
- 样式处理：SCSS
- 构建工具：webpack

## 开发记录

### 2024-01-08

#### 1. 数组编辑功能实现
实现了数组类型的编辑功能，主要考虑以下几点：

1. **数据展示**
   - 使用 `[n items]` 格式显示数组长度
   - 数组项支持展开/折叠
   - 保持数组项的顺序

2. **编辑交互**
   - 独立的数组编辑器组件
   - 支持添加/删除操作
   - 实时更新数组长度
   - 自动维护索引

3. **技术决策**
   - 使用事件委托处理数组操作
   - 统一的数据类型处理
   - 实时保存修改

#### 2. 代码重构
对代码结构进行了优化：

1. **配置管理**
   - 创建 `config.js` 统一管理配置
   - 分离默认值和字段说明
   - 支持配置的扩展

2. **工具函数**
   - 抽离选择器相关函数到 `utils.js`
   - 统一 DOM 查询方法
   - 添加类型判断工具

3. **样式优化**
   - 使用 SCSS 嵌套语法
   - 统一的样式命名
   - 添加过渡动画

#### 3. 交互优化
改进了用户交互体验：

1. **详情按钮**
   - ��分有无说明的状态
   - 禁用无说明的按钮
   - 添加视觉反馈

2. **弹窗处理**
   - 优化弹窗定位
   - 改进滚动行为
   - 添加关闭动画

3. **编辑体验**
   - 优化输入控件
   - 添加保存反馈
   - 改进错误处理

## 代码规范

1. **文件组织**
   ```
   src/
   ├── index.js      # 插件主文件
   ├── config.js     # 配置和字段说明
   ├── utils.js      # 工具函数
   ├── style.scss    # 样式文件
   └── assets/       # 资源文件
   ```

2. **命名规范**
   - 类名使用 BEM 命名
   - 变量使用驼峰命名
   - 常量使用大写下划线

3. **注释规范**
   - 文件头部添加说明
   - 关键函数添加注释
   - 复杂逻辑添加说明

## 待办事项

- [ ] 支持更多数据类型
- [ ] 添加配置导出功能
- [ ] 优化大数据量性能
- [ ] 添加撤销/重做功能
- [ ] 实现配置搜索功能

## 注意事项

1. **性能优化**
   - 使用事件委托
   - 避免频繁 DOM 操作
   - 控制渲染范围

2. **兼容性**
   - 支持主流浏览器
   - 移动端适配
   - 降级方案

3. **安全性**
   - XSS 防护
   - 类型检查
   - 错误处理 